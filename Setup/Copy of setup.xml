<?xml version="1.0" encoding="utf-8"?>
<application>
    <name>Membership</name>
    <version>1.5</version>
    <order>80</order>
    <status>enabled</status>
	<depends>
        <application>Addressbook</application>
	</depends>
    <tables>
        <table>
			<name>membership</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
				<field>
	                <name>contact_id</name>
	                <type>integer</type>
	                <notnull>true</notnull>
	            </field>
				<field>
	                <name>society_member_id</name>
	                <type>text</type>
					<length>40</length>
	                <notnull>false</notnull>
					<default>null</default>
	            </field>
				<field>
	                <name>family_member_id</name>
	                <type>text</type>
					<length>40</length>
	                <notnull>false</notnull>
					<default>null</default>
	            </field>
				<field>
	                <name>association_contact_id</name>
	                <type>integer</type>
	                <notnull>false</notnull>
	            </field>
				<field>
	                <name>member_nr</name>
	                <type>text</type>
					<length>64</length>
	                <notnull>false</notnull>
					<unique>true</unique>
	            </field>				
				<field>
	                <name>affiliate_contact_id</name>
	                <type>integer</type>
	                <notnull>false</notnull>
	            </field>				
				<field>
					<name>begin_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>discharge_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>termination_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
	                <name>entry_reason_id</name>
	                <type>integer</type>
	                <notnull>false</notnull>
					<default>0</default>
	            </field>
				<field>
	                <name>termination_reason_id</name>
	                <type>integer</type>
	                <notnull>false</notnull>
					<default>0</default>
	            </field>	
				<field>
					<name>exp_membercard_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>member_notes</name>
					<type>text</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>invoice_fee</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<field>
					<name>membership_type</name>
					<type>enum</type>
					<value>SINGLE</value>
					<value>FAMILY</value>
					<value>VIASOCIETY</value>
					<value>SOCIETY</value>
					<value>TCINSURANCE</value>
					<default>SOCIETY</default>
				</field>
				<field>
					<name>membership_status</name>
					<type>enum</type>
					<value>ACTIVE</value>
					<value>PASSIVE</value>
					<default>ACTIVE</default>
				</field>
				<field>
					<name>society_sopen_user</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<field>
					<name>fee_payment_interval</name>
					<type>enum</type>
					<value>NOVALUE</value>
					<value>YEAR</value>
					<value>QUARTER</value>
					<value>MONTH</value>
					<default>NOVALUE</default>
				</field>				
				<field>
					<name>fee_payment_method</name>
					<type>enum</type>
					<value>NOVALUE</value>
					<value>BANKTRANSFER</value>
					<value>DEBIT</value>
					<default>NOVALUE</default>
				</field>
				<field>
					<name>bank_code</name>
					<type>text</type>
					<length>12</length>
					<notnull>false</notnull>
				</field>	
				<field>
					<name>bank_name</name>
					<type>text</type>
					<length>64</length>
					<notnull>false</notnull>
				</field>
				<field>
					<name>bank_account_nr</name>
					<type>text</type>
					<length>64</length>
					<notnull>false</notnull>
				</field>
				<field>
					<name>account_holder</name>
					<type>text</type>
					<length>64</length>
					<notnull>false</notnull>
				</field>															
				<field>
					<name>is_online_user</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<field>
					<name>is_family_leading</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
                <index>
                    <name>membership::contact_id--addressbook::id</name>
                    <field>
                        <name>contact_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>addressbook</table>
                        <field>id</field>
                    </reference>
                </index>
                <index>
                    <name>membership::association_contact_id--addressbook::id</name>
                    <field>
                        <name>association_contact_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>addressbook</table>
                        <field>id</field>
                    </reference>
                </index>				
                <index>
                    <name>membership::affiliate_contact_id--addressbook::id</name>
                    <field>
                        <name>affiliate_contact_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>addressbook</table>
                        <field>id</field>
                    </reference>
                </index>
			</declaration>
		</table>
		<table>
			<name>membership_fee_progress_ext</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
				<field>
					<name>mc_procure_contact_id</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>				
				<field>
					<name>fee_ext_year</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>active_members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>passive_members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>juvenile_members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>adult_members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>acclamative_members_total</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>	
				<field>
					<name>main_convention_votes</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>mc_procure_votes</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>mc_votes_acc_procure</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>mc_attendance</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
                <index>
                    <name>fee_progress_ext::mc_procure_contact_id--addressbook::id</name>
                    <field>
                        <name>mc_procure_contact_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>addressbook</table>
                        <field>id</field>
                    </reference>
                </index>				
			</declaration>
		</table>			
        <table>
			<name>membership_fee_progress</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>member_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>fee_progress_ext_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>false</notnull>
                </field>				
				<field>
					<name>fee_category</name>
					<type>enum</type>
					<value>NOVALUE</value>
					<value>SOCIETY</value>
					<value>FAMILY</value>
					<value>CHILD</value>
					<value>JUVENILE</value>
					<value>ADULT</value>
					<default>NOVALUE</default>
				</field>
				<field>
					<name>fee_from_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>fee_to_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<field>
					<name>fee_year</name>
					<type>integer</type>
					<notnull>false</notnull>
				</field>	
				<field>
					<name>is_calculation_approved</name>
					<type>boolean</type>
					<default>false</default>
				</field>
				<field>
					<name>fee_period_notes</name>
					<type>text</type>
					<notnull>false</notnull>
				</field>				
				<field>
					<name>fee_calc_datetime</name>
					<type>date</type>
					<notnull>false</notnull>
				</field>
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
                <index>
                    <name>membership_fee_progress::member_id--membership::id</name>
                    <field>
                        <name>member_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>membership</table>
                        <field>id</field>
                    </reference>
                </index>
                <index>
                    <name>fee_progress::fee_progress_ext_id--fee_progress_ext::id</name>
                    <field>
                        <name>fee_progress_ext_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>membership_fee_progress_ext</table>
                        <field>id</field>
                    </reference>
                </index>				
			</declaration>
		</table>
 		<table>
			<name>membership_fee_definition</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>fee_class_name</name>
                    <type>text</type>
					<length>48</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>iterator_filter_class</name>
                    <type>text</type>
					<length>128</length>
                    <notnull>false</notnull>
                </field>
                <field>
                    <name>filter_class</name>
                    <type>text</type>
					<length>128</length>
                    <notnull>false</notnull>
                </field>
				<field>
                    <name>iterator_filters</name>
                    <type>text</type>
					<notnull>false</notnull>
                </field>
				<field>
                    <name>filters</name>
                    <type>text</type>
					<notnull>false</notnull>
                </field>
				<field>
                    <name>fee_calculator_class</name>
                    <type>text</type>
					<length>128</length>
                    <notnull>false</notnull>
                </field>
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
			</declaration>
		</table>
		<table>
			<name>membership_fee_article</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
				<field>
					<name>membership_fee_def_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
				</field>
				<field>
	                <name>society_contact_id</name>
	                <type>integer</type>
	                <notnull>false</notnull>
	            </field>
				<field>
					<name>article_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
				</field>
				<field>
					<name>price_group_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
				</field>
				<field>
					<name>fee_base_category</name>
                    <type>text</type>
					<length>64</length>
                    <notnull>false</notnull>
				</field>
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
				<!--field>
					<name>fee_component_id</name>
                    <type>integer</type>
					<length>11</length>
                    <notnull>true</notnull>
				</field-->
			</declaration>
		</table>
		<!--table>
			<name>membership_fee_base_category</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>integer</type>
					<autoincrement>true</autoincrement>
                    <notnull>true</notnull>
                </field>
				<field>
					<name>name</name>
                    <type>text</type>
					<length>48</length>
                    <notnull>true</notnull>
				</field>
			</declaration>
		</table>
		<table>
			<name>membership_fee_component</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>integer</type>
					<autoincrement>true</autoincrement>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>fee_category_id</name>
                    <type>integer</type>
					<autoincrement>true</autoincrement>
                    <notnull>true</notnull>
                </field>
				<field>
					<name>name</name>
                    <type>text</type>
					<length>48</length>
                    <notnull>true</notnull>
				</field>
			</declaration>
		</table-->
    </tables>
</application>